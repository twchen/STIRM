(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){e.exports=a(30)},30:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(4),l=a(10),c=a(18),s=a(12),o=function(e){return{type:"SET_ACTIVE_COMPONENT",component:e}},i=Object(r.b)({activeComponent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Welcome",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_COMPONENT":return t.component;default:return e}},dataset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATASET":return t.dataset;default:return e}},attributes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATASET":return t.attributes;default:return e}},candidates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CANDIDATES":return t.candidates;default:return e}},mask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATASET":var a={};return t.attributes.forEach(function(e){var t=Object(n.a)(e,2),r=t[0];t[1],a[r]=1}),a;case"TOGGLE_MASK":return Object(c.a)({},e,t.mask);default:return e}},result:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_RESULT":return t.result;default:return e}},numQuestions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case"RESTART":return 0;case"INCREMENT_QCOUNT":return e+1;default:return e}},prunedPoints:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESTART":return[];case"PRUNE_POINTS":return[].concat(Object(l.a)(t.points),Object(l.a)(e));default:return e}},leftPoints:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LEFT_POINTS":return t.points;case"PRUNE_POINTS":return e.filter(function(e){return!t.indices.includes(e[0])});default:return e}},mode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"simplex",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MODE":return t.mode;default:return e}}}),u=a(0),m=a.n(u),d=a(20),p=a(2),h=a(5),f=a(6),E=a(8),b=a(7),v=a(9),g=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(E.a)(this,Object(b.a)(t).call(this,e))).handleStart=function(){for(var e=new window.Module.Ranges,t=new window.Module.VectorInt,r=/^\d+$/,l=0;l<a.props.attributes.length;++l){var c=Object(n.a)(a.props.attributes[l],2),s=c[0],o=c[1],i=[o.low,o.high];if(a.props.mask[s])for(var u=0;u<2;++u){var m=a.inputs[s][u].current.value.trim();if(""!==m){if(!r.test(m))return void alert("".concat(m," in ").concat(s," range is not an integer"));i[u]=parseInt(m)}}e.push_back(i),t.push_back(a.props.mask[s])}var d=1e3,p=a.inputs.maxPoints.current.value.trim();""!==p&&r.test(p)&&(d=parseInt(p));var h=a.props.dataset.selectCandidates(e,t,d);if(0===h.size())return window.Module.releasePoints(h),void alert("No matching cars, try larger ranges");a.props.startAlgorithm(h)},a.handleModeChange=function(e){a.props.changeMode(e.target.value)},a.inputs={},a.props.attributes.forEach(function(e){var t=Object(n.a)(e,2),r=t[0];t[1];a.inputs[r]=[m.a.createRef(),m.a.createRef()]}),a.inputs.maxPoints=m.a.createRef(),a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props.attributes.map(function(t){var a=Object(n.a)(t,2),r=a[0],l=a[1],c=0===e.props.mask[r],s=l.low,o=l.high;return m.a.createElement("tr",{key:r},m.a.createElement("td",{className:"align-middle"},r),m.a.createElement("td",null,m.a.createElement("input",{type:"text",className:"form-control",placeholder:s,ref:e.inputs[r][0],disabled:c})),m.a.createElement("td",null,m.a.createElement("input",{type:"text",className:"form-control",placeholder:o,ref:e.inputs[r][1],disabled:c})),m.a.createElement("td",{className:"align-middle hidden"},m.a.createElement("input",{type:"checkbox",checked:c,onChange:function(){return e.props.toggleMask(r,1-e.props.mask[r])}})))});return m.a.createElement("div",{className:"text-center m-auto",style:{maxWidth:"50rem"}},m.a.createElement("h1",null,"Welcome"),m.a.createElement("p",{className:"lead text-muted"},"This website helps you find your favorite car in a dataset of used cars. ",m.a.createElement("br",null),"Enter your acceptable ranges for each attribute and the maximum number of cars. Leave an input blank to use its default. ",m.a.createElement("br",null),"You will be presented two cars each time and you need to choose the one your prefer. ",m.a.createElement("br",null),"Two algorithms are available to select the cars at each step. ",m.a.createElement("br",null),'Click "Start" to start finding your favorite car!'),m.a.createElement("table",{className:"table"},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",{className:"align-middle"},"Attribute"),m.a.createElement("th",null,"Lower bound"),m.a.createElement("th",null,"Upper bound"),m.a.createElement("th",{className:"hidden"},"Discard"))),m.a.createElement("tbody",null,t)),m.a.createElement("form",null,m.a.createElement("div",{className:"form-group row align-items-center"},m.a.createElement("div",{className:"col-6"},m.a.createElement("div",{className:"row align-items-center"},m.a.createElement("label",{htmlFor:"maxPoints",className:"col-4 col-form-label"},"Max No. of Cars"),m.a.createElement("div",{className:"col"},m.a.createElement("input",{type:"text",className:"form-control",id:"maxPoints",placeholder:"1000",ref:this.inputs.maxPoints})))),m.a.createElement("div",{className:"col-6"},m.a.createElement("div",{className:"row align-items-center"},m.a.createElement("label",{className:"col-4 col-form-label"},"Mode"),m.a.createElement("div",{className:"col text-left"},m.a.createElement("div",{className:"form-check form-check-inline"},m.a.createElement("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"simplex",value:"simplex",checked:"simplex"===this.props.mode,onChange:this.handleModeChange}),m.a.createElement("label",{className:"form-check-label",htmlFor:"simplex"},"Simplex")),m.a.createElement("div",{className:"form-check form-check-inline"},m.a.createElement("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"random",value:"random",checked:"random"===this.props.mode,onChange:this.handleModeChange}),m.a.createElement("label",{className:"form-check-label",htmlFor:"random"},"Random")))))),m.a.createElement("div",{className:"form-group row"},m.a.createElement("div",{className:"col"},m.a.createElement("button",{type:"button",className:"btn btn-primary",style:{width:"8rem"},onClick:this.handleStart},"Start")))))}}]),t}(m.a.Component),y=Object(p.b)(function(e){return{attributes:e.attributes,mask:e.mask,dataset:e.dataset,mode:e.mode}},function(e){return{startAlgorithm:function(t){e(function(e){return{type:"SET_CANDIDATES",candidates:e}}(t)),e(o("Interaction"))},toggleMask:function(t,a){return e(function(e,t){return{type:"TOGGLE_MASK",mask:Object(s.a)({},e,t)}}(t,a))},changeMode:function(t){return e(function(e){return{type:"SET_MODE",mode:e}}(t))}}})(g),N=2,k=1;function w(e){for(var t=[],a=0;a<e.dim();++a)t.push(e.get(a));return t}function O(e){for(var t=[],a=0;a<e.size();++a)t.push(w(e.get(a)));return t}var T=function(e){function t(e){var a;Object(h.a)(this,t),(a=Object(E.a)(this,Object(b.a)(t).call(this,e))).choose=function(e){var t=e+1;a.runner.choose(t);var n=a.runner.getCandidatesIndices(),r=function(e,t){for(var a=[],n=0,r=0;n<e.size()||r<t.size();)r>=t.size()||e.get(n)<t.get(r)?(a.push(e.get(n)),++n):(++n,++r);return a}(a.prevIndices,n),c=r.map(function(e){var t=a.props.candidates.get(e);return[e,a.props.numQuestions+1].concat(Object(l.a)(w(t)))});if(a.props.prunePoints(c,r),a.prevIndices=n,a.props.incrementQCount(),a.runner.isFinished()){var s=w(a.runner.getResult());window.Module.releasePoints(a.props.candidates),a.props.showResult(s)}else{var o=O(a.runner.nextPair());a.setState({pair:o})}};var r=new window.Module.VectorInt;a.attributes=[],a.props.attributes.forEach(function(e){var t=Object(n.a)(e,2),l=t[0],c=t[1];a.props.mask[l]&&(r.push_back(c.smallerBetter?1:0),a.attributes.push(l))}),a.runner=new window.Module.AlgorithmRunner(a.props.candidates,r,"random"===a.props.mode?k:N),a.prevIndices=a.runner.getCandidatesIndices();for(var c=[],s=0;s<a.prevIndices.size();++s){var o=a.prevIndices.get(s),i=a.props.candidates.get(o),u=[o].concat(Object(l.a)(w(i)));c.push(u)}if(a.props.setLeftPoints(c),a.runner.isFinished()){a.state={pair:[]};var m=w(a.runner.getResult());window.Module.releasePoints(a.props.candidates),a.props.showResult(m)}else a.state={pair:O(a.runner.nextPair())};return a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=[m.a.createElement("th",{key:"Option No."},"Option")];this.attributes.forEach(function(e){t.push(m.a.createElement("th",{key:e},e))}),t.push(m.a.createElement("th",{key:"chooseButton"}));var a=this.state.pair.map(function(t,a){var n=[m.a.createElement("td",{key:"Option No."},a+1)];return t.forEach(function(e,t){n.push(m.a.createElement("td",{key:t},e))}),n.push(m.a.createElement("td",{key:"chooseButton"},m.a.createElement("button",{type:"button",className:"btn btn-outline-success btn-sm",onClick:function(){return e.choose(a)}},"Choose"))),m.a.createElement("tr",{key:a},n)});return m.a.createElement("div",{className:"row justify-content-center"},m.a.createElement("div",{className:"col-md-8"},m.a.createElement("h4",null,"Q",this.props.numQuestions+1,": choose the car you favor more"),m.a.createElement("table",{className:"table table-hover text-center"},m.a.createElement("thead",null,m.a.createElement("tr",null,t)),m.a.createElement("tbody",null,a))))}}]),t}(m.a.Component),j=Object(p.b)(function(e){return{candidates:e.candidates,mask:e.mask,attributes:e.attributes,numQuestions:e.numQuestions,mode:e.mode}},function(e){return{showResult:function(t){e(function(e){return{type:"SET_RESULT",result:e}}(t)),e(o("Result"))},incrementQCount:function(){e({type:"INCREMENT_QCOUNT"})},setLeftPoints:function(t){e({type:"SET_LEFT_POINTS",points:t})},prunePoints:function(t,a){e(function(e,t){return{type:"PRUNE_POINTS",points:e,indices:t}}(t,a))}}})(T);var S=Object(p.b)(function(e){return{result:e.result,attributes:e.attributes,mask:e.mask,numQuestions:e.numQuestions}},function(e){return{restart:function(){e(o("Welcome")),e({type:"RESTART"})}}})(function(e){var t=e.result,a=e.attributes,r=e.mask,l=e.numQuestions,c=e.restart,s=[];a.forEach(function(e){var t=Object(n.a)(e,2),a=t[0];if(t[1],r[a]){var l=m.a.createElement("th",{key:a},a);s.push(l)}});var o=t.map(function(e,t){return m.a.createElement("td",{key:t},e)});return m.a.createElement("div",{className:"row justify-content-center"},m.a.createElement("div",{className:"col"},m.a.createElement("h4",null,"No. of questions asked: ",l),m.a.createElement("h4",null,"Your favorite car is"),m.a.createElement("table",{className:"table table-hover text-center"},m.a.createElement("thead",null,m.a.createElement("tr",null,s)),m.a.createElement("tbody",null,m.a.createElement("tr",null,o))),m.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:c},"Return to Welcome")))}),P=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(E.a)(this,Object(b.a)(t).call(this,e))).attributes=[],a.props.attributes.forEach(function(e){var t=Object(n.a)(e,2),r=t[0];t[1];a.props.mask[r]&&a.attributes.push(r)}),a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=[m.a.createElement("th",{key:"Step No."},"Step")];this.attributes.forEach(function(t){e.push(m.a.createElement("th",{key:t},t))});var t=this.props.prunedPoints.map(function(e,t){return m.a.createElement("tr",{key:t},e.slice(1).map(function(e,t){return m.a.createElement("td",{key:t},e)}))}),a=this.props.leftPoints.map(function(e,t){return m.a.createElement("tr",{key:t},e.slice(1).map(function(e,t){return m.a.createElement("td",{key:t},e)}))});return m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col"},m.a.createElement("h4",null,"No. of points pruned: ",this.props.prunedPoints.length),m.a.createElement("table",{className:"table"},m.a.createElement("thead",null,m.a.createElement("tr",null,e)),m.a.createElement("tbody",null,t))),m.a.createElement("div",{className:"col"},m.a.createElement("h4",null,"No. of points left: ",this.props.leftPoints.length),m.a.createElement("table",{className:"table"},m.a.createElement("thead",null,m.a.createElement("tr",null,e.slice(1))),m.a.createElement("tbody",null,a))))}}]),t}(m.a.Component),C=Object(p.b)(function(e){return{prunedPoints:e.prunedPoints,leftPoints:e.leftPoints,attributes:e.attributes,mask:e.mask,numQuestions:e.numQuestions}})(P);var R=Object(p.b)(function(e){return{activeComponent:e.activeComponent}})(function(e){var t=e.activeComponent;return"Welcome"===t?m.a.createElement(y,null):"Interaction"===t?m.a.createElement("div",null,m.a.createElement(j,null),m.a.createElement(C,null)):"Result"===t?m.a.createElement(S,null):m.a.createElement("div",null)});window.Module={onRuntimeInitialized:function(){var e=new window.Module.Dataset("car.txt"),t=[["Price",{low:1e3,high:5e4,smallerBetter:!0}],["Year",{low:2001,high:2017,smallerBetter:!1}],["Power",{low:50,high:400,smallerBetter:!1}],["Used KM",{low:1e4,high:15e4,smallerBetter:!0}]],a={};t.forEach(function(e){var t=Object(n.a)(e,2),r=t[0];t[1];a[r]=1});var l=Object(r.c)(i,{dataset:e,attributes:t,mask:a});Object(d.render)(m.a.createElement(p.a,{store:l},m.a.createElement(R,null)),document.getElementById("root"))}};var x=document.createElement("script");x.src="web.js",x.async=!0,document.body.appendChild(x)}},[[21,2,1]]]);
//# sourceMappingURL=main.5eb61657.chunk.js.map