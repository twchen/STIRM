(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,n){e.exports=n(52)},52:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(13),c=n(10),o=n(30),s=n(18),l=function(e){return{type:"SET_ACTIVE_COMPONENT",component:e}},i=Object(r.b)({activeComponent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Welcome",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_COMPONENT":return t.component;default:return e}},dataset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATASET":return t.dataset;default:return e}},attributes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATASET":return t.attributes;default:return e}},candidates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CANDIDATES":return t.candidates;default:return e}},mask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATASET":var n={};return t.attributes.forEach(function(e){var t=Object(a.a)(e,2),r=t[0];t[1],n[r]=1}),n;case"TOGGLE_MASK":return Object(o.a)({},e,t.mask);default:return e}},numQuestions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case"RESTART":return 0;case"INCREMENT_QCOUNT":return e+1;default:return e}},prunedPoints:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESTART":return[];case"PRUNE_POINTS":return[].concat(Object(c.a)(t.points),Object(c.a)(e));default:return e}},leftPoints:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LEFT_POINTS":return t.points;case"PRUNE_POINTS":return e.filter(function(e){return!t.indices.includes(e[0])});default:return e}},numLeftPoints:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CANDIDATES":return[t.candidates.size()];case"SET_LEFT_POINTS":return[].concat(Object(c.a)(e),[t.points.length]);case"PRUNE_POINTS":var n=e[e.length-1];return[].concat(Object(c.a)(e),[n-t.points.length]);default:return e}},mode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"simplex",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MODE":return t.mode;default:return e}}}),u=n(1),m=n.n(u),d=n(32),p=n(2),h=n(5),f=n(6),E=n(8),b=n(7),v=n(9),g=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(E.a)(this,Object(b.a)(t).call(this,e))).handleStart=function(){for(var e=new window.Module.Ranges,t=new window.Module.VectorInt,r=/^\d+$/,c=0;c<n.props.attributes.length;++c){var o=Object(a.a)(n.props.attributes[c],2),s=o[0],l=o[1],i=[l.low,l.high];if(n.props.mask[s])for(var u=0;u<2;++u){var m=n.inputs[s][u].current.value.trim();if(""!==m){if(!r.test(m))return void alert("".concat(m," in ").concat(s," range is not an integer"));i[u]=parseInt(m)}}e.push_back(i),t.push_back(n.props.mask[s])}var d=1e3,p=n.inputs.maxPoints.current.value.trim();""!==p&&r.test(p)&&(d=parseInt(p));var h=n.props.dataset.selectCandidates(e,t,d);if(0===h.size())return window.Module.releasePoints(h),void alert("No matching cars, try larger ranges");n.props.startAlgorithm(h)},n.handleModeChange=function(e){n.props.changeMode(e.target.value)},n.inputs={},n.props.attributes.forEach(function(e){var t=Object(a.a)(e,2),r=t[0];t[1];n.inputs[r]=[m.a.createRef(),m.a.createRef()]}),n.inputs.maxPoints=m.a.createRef(),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props.attributes.map(function(t){var n=Object(a.a)(t,2),r=n[0],c=n[1],o=0===e.props.mask[r],s=c.low,l=c.high;return m.a.createElement("tr",{key:r},m.a.createElement("td",{className:"align-middle"},r),m.a.createElement("td",null,m.a.createElement("input",{type:"text",className:"form-control",placeholder:s,ref:e.inputs[r][0],disabled:o})),m.a.createElement("td",null,m.a.createElement("input",{type:"text",className:"form-control",placeholder:l,ref:e.inputs[r][1],disabled:o})),m.a.createElement("td",{className:"align-middle hidden"},m.a.createElement("input",{type:"checkbox",checked:o,onChange:function(){return e.props.toggleMask(r,1-e.props.mask[r])}})))});return m.a.createElement("div",{className:"text-center m-auto",style:{maxWidth:"50rem"}},m.a.createElement("h1",null,"Find Your Favorite!"),m.a.createElement("p",{className:"lead text-muted"},"This is a demostration of an interactive system for finding your favorite car in a used car database. ",m.a.createElement("br",null),"Enter your acceptable range for each attribute (leave blank to use the default). ",m.a.createElement("br",null),"You will be presented two cars each time and you need to choose the one you favor more. ",m.a.createElement("br",null),'Click the "Start" button to find your favorite car in the database! ',m.a.createElement("br",null)),m.a.createElement("table",{className:"table"},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",{className:"align-middle"},"Attribute"),m.a.createElement("th",null,"Lower bound"),m.a.createElement("th",null,"Upper bound"),m.a.createElement("th",{className:"hidden"},"Discard"))),m.a.createElement("tbody",null,t)),m.a.createElement("form",null,m.a.createElement("div",{className:"form-group row align-items-center"},m.a.createElement("div",{className:"col-6"},m.a.createElement("div",{className:"row align-items-center"},m.a.createElement("label",{htmlFor:"maxPoints",className:"col-4 col-form-label"},"Max No. of Cars"),m.a.createElement("div",{className:"col"},m.a.createElement("input",{type:"text",className:"form-control",id:"maxPoints",placeholder:"1000",ref:this.inputs.maxPoints})))),m.a.createElement("div",{className:"col-6"},m.a.createElement("div",{className:"row align-items-center"},m.a.createElement("label",{className:"col-4 col-form-label"},"Mode"),m.a.createElement("div",{className:"col text-left"},m.a.createElement("div",{className:"form-check form-check-inline"},m.a.createElement("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"simplex",value:"simplex",checked:"simplex"===this.props.mode,onChange:this.handleModeChange}),m.a.createElement("label",{className:"form-check-label",htmlFor:"simplex"},"Simplex")),m.a.createElement("div",{className:"form-check form-check-inline"},m.a.createElement("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"random",value:"random",checked:"random"===this.props.mode,onChange:this.handleModeChange}),m.a.createElement("label",{className:"form-check-label",htmlFor:"random"},"Random")))))),m.a.createElement("div",{className:"form-group row"},m.a.createElement("div",{className:"col"},m.a.createElement("button",{type:"button",className:"btn btn-primary",style:{width:"8rem"},onClick:this.handleStart},"Start")))))}}]),t}(m.a.Component),N=Object(p.b)(function(e){return{attributes:e.attributes,mask:e.mask,dataset:e.dataset,mode:e.mode}},function(e){return{startAlgorithm:function(t){e(function(e){return{type:"SET_CANDIDATES",candidates:e}}(t)),e(l("Interaction"))},toggleMask:function(t,n){return e(function(e,t){return{type:"TOGGLE_MASK",mask:Object(s.a)({},e,t)}}(t,n))},changeMode:function(t){return e(function(e){return{type:"SET_MODE",mode:e}}(t))}}})(g),y=2,k=1;function O(e){for(var t=[],n=0;n<e.dim();++n)t.push(e.get(n));return t}function w(e){for(var t=[],n=0;n<e.size();++n)t.push(O(e.get(n)));return t}var T=function(e){function t(e){var n;Object(h.a)(this,t),(n=Object(E.a)(this,Object(b.a)(t).call(this,e))).choose=function(e){var t=e+1;n.runner.choose(t);var a=n.runner.getCandidatesIndices(),r=function(e,t){for(var n=[],a=0,r=0;a<e.size()||r<t.size();)r>=t.size()||e.get(a)<t.get(r)?(n.push(e.get(a)),++a):(++a,++r);return n}(n.prevIndices,a),o=r.map(function(e){var t=n.props.candidates.get(e);return[e,n.props.numQuestions+1].concat(Object(c.a)(O(t)))});if(n.props.prunePoints(o,r),n.prevIndices=a,n.props.incrementQCount(),n.prevIndices.size()<2)n.stopInteraction();else{var s=w(n.runner.nextPair());n.setState({pair:s})}},n.stopInteraction=function(){window.Module.releasePoints(n.props.candidates),n.props.showResult()};var r=new window.Module.VectorInt;n.attributes=[],n.props.attributes.forEach(function(e){var t=Object(a.a)(e,2),c=t[0],o=t[1];n.props.mask[c]&&(r.push_back(o.smallerBetter?1:0),n.attributes.push(c))}),n.runner=new window.Module.AlgorithmRunner(n.props.candidates,r,"random"===n.props.mode?k:y),n.prevIndices=n.runner.getCandidatesIndices();for(var o=[],s=0;s<n.prevIndices.size();++s){var l=n.prevIndices.get(s),i=n.props.candidates.get(l),u=[l].concat(Object(c.a)(O(i)));o.push(u)}return n.props.setLeftPoints(o),n.prevIndices.size()<2?(n.state={pair:[]},n.stopInteraction()):n.state={pair:w(n.runner.nextPair())},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=[m.a.createElement("th",{key:"Option No."},"Option")];this.attributes.forEach(function(e){t.push(m.a.createElement("th",{key:e},e))}),t.push(m.a.createElement("th",{key:"chooseButton"}));var n=this.state.pair.map(function(t,n){var a=[m.a.createElement("td",{key:"Option No."},n+1)];return t.forEach(function(e,t){a.push(m.a.createElement("td",{key:t},e))}),a.push(m.a.createElement("td",{key:"chooseButton"},m.a.createElement("button",{type:"button",className:"btn btn-outline-success btn-sm",onClick:function(){return e.choose(n)}},"Choose"))),m.a.createElement("tr",{key:n},a)});return m.a.createElement("div",{className:"row justify-content-center"},m.a.createElement("div",{className:"col-md-8"},m.a.createElement("h4",null,"Q",this.props.numQuestions+1,": Choose the Car You Favor More among the Following Options"),m.a.createElement("table",{className:"table table-hover text-center"},m.a.createElement("thead",null,m.a.createElement("tr",null,t)),m.a.createElement("tbody",null,n)),m.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.stopInteraction},"Stop")))}}]),t}(m.a.Component),P=Object(p.b)(function(e){return{candidates:e.candidates,mask:e.mask,attributes:e.attributes,numQuestions:e.numQuestions,mode:e.mode}},function(e){return{showResult:function(){e(l("Result"))},incrementQCount:function(){e({type:"INCREMENT_QCOUNT"})},setLeftPoints:function(t){e({type:"SET_LEFT_POINTS",points:t})},prunePoints:function(t,n){e(function(e,t){return{type:"PRUNE_POINTS",points:e,indices:t}}(t,n))}}})(T),j=n(12),C=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(E.a)(this,Object(b.a)(t).call(this,e)))._onMouseLeave=function(){n.setState({hintValue:null})},n._onNearestX=function(e,t){var a=t.index;n.setState({hintValue:n.data[a]})},n.state={hintValue:null},n.data=e.numLeftPoints.map(function(e,t){return{x:t,y:e}}),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return m.a.createElement(j.e,{onMouseLeave:this._onMouseLeave,height:400,width:400},m.a.createElement(j.d,{tickValues:this.props.numLeftPoints.map(function(e,t){return t}),tickFormat:function(e,t,n,a){return e.toString()}}),m.a.createElement(j.f,null),m.a.createElement(j.a,{text:"Question No.",includeMargin:!1,xPercent:.85,yPercent:1.06}),m.a.createElement(j.a,{text:"No. of Cars Left",includeMargin:!1,xPercent:-.01,yPercent:.05,style:{transform:"rotate(-90)",textAnchor:"end"}}),m.a.createElement(j.c,{onNearestX:this._onNearestX,data:this.data}),this.state.hintValue&&m.a.createElement(j.b,{value:this.state.hintValue},m.a.createElement("p",{style:{color:"rgb(90, 90, 90)"}},"Q",this.state.hintValue.x,": ",this.state.hintValue.y," Cars Left")))}}]),t}(m.a.Component),S=Object(p.b)(function(e){return{numLeftPoints:e.numLeftPoints}})(C);var x=Object(p.b)(function(e){return{leftPoints:e.leftPoints,attributes:e.attributes,mask:e.mask,numQuestions:e.numQuestions}},function(e){return{restart:function(){e(l("Welcome")),e({type:"RESTART"})}}})(function(e){var t=e.leftPoints,n=e.attributes,r=e.mask,c=e.numQuestions,o=e.restart,s=[];n.forEach(function(e){var t=Object(a.a)(e,2),n=t[0];if(t[1],r[n]){var c=m.a.createElement("th",{key:n},n);s.push(c)}});var l=t.map(function(e,t){return m.a.createElement("tr",{key:t},e.slice(1).map(function(e,t){return m.a.createElement("td",{key:t},e)}))});return m.a.createElement("div",{className:"row justify-content-center"},m.a.createElement("div",{className:"col"},m.a.createElement("h4",null,"The Total No. of Questions Asked is: ",c,"."),m.a.createElement("h4",null,1===t.length?"Your Favourite Car is:":"".concat(t.length," Cars Left in the Database:")),m.a.createElement("table",{className:"table table-hover text-center"},m.a.createElement("thead",null,m.a.createElement("tr",null,s)),m.a.createElement("tbody",null,l)),m.a.createElement("div",{className:"d-flex justify-content-center"},m.a.createElement(S,null)),m.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:o},"Return to Welcome")))}),I=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(E.a)(this,Object(b.a)(t).call(this,e))).attributes=[],n.props.attributes.forEach(function(e){var t=Object(a.a)(e,2),r=t[0];t[1];n.props.mask[r]&&n.attributes.push(r)}),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=[m.a.createElement("th",{key:"Step No."},"Step")];this.attributes.forEach(function(t){e.push(m.a.createElement("th",{key:t},t))});var t=this.props.prunedPoints.map(function(e,t){return m.a.createElement("tr",{key:t},e.slice(1).map(function(e,t){return m.a.createElement("td",{key:t},e)}))}),n=this.props.leftPoints.map(function(e,t){return m.a.createElement("tr",{key:t},e.slice(1).map(function(e,t){return m.a.createElement("td",{key:t},e)}))});return m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col"},m.a.createElement("h4",null,"The No. of Cars We Have Pruned: ",this.props.prunedPoints.length),m.a.createElement("table",{className:"table"},m.a.createElement("thead",null,m.a.createElement("tr",null,e)),m.a.createElement("tbody",null,t))),m.a.createElement("div",{className:"col"},m.a.createElement("h4",null,"The No. of Cars Left in the Database: ",this.props.leftPoints.length),m.a.createElement("table",{className:"table"},m.a.createElement("thead",null,m.a.createElement("tr",null,e.slice(1))),m.a.createElement("tbody",null,n))))}}]),t}(m.a.Component),_=Object(p.b)(function(e){return{prunedPoints:e.prunedPoints,leftPoints:e.leftPoints,attributes:e.attributes,mask:e.mask,numQuestions:e.numQuestions}})(I);var M=Object(p.b)(function(e){return{activeComponent:e.activeComponent}})(function(e){var t=e.activeComponent;return"Welcome"===t?m.a.createElement(N,null):"Interaction"===t?m.a.createElement("div",null,m.a.createElement(P,null),m.a.createElement(_,null)):"Result"===t?m.a.createElement(x,null):m.a.createElement("div",null)});window.Module={onRuntimeInitialized:function(){var e=new window.Module.Dataset("car.txt"),t=[["Price (USD)",{low:1e3,high:5e4,smallerBetter:!0}],["Year",{low:2001,high:2017,smallerBetter:!1}],["Power (HP)",{low:50,high:400,smallerBetter:!1}],["Used KM",{low:1e4,high:15e4,smallerBetter:!0}]],n={};t.forEach(function(e){var t=Object(a.a)(e,2),r=t[0];t[1];n[r]=1});var c=Object(r.c)(i,{dataset:e,attributes:t,mask:n});Object(d.render)(m.a.createElement(p.a,{store:c},m.a.createElement(M,null)),document.getElementById("root"))}};var R=document.createElement("script");R.src="web.js",R.async=!0,document.body.appendChild(R)}},[[34,2,1]]]);
//# sourceMappingURL=main.da1d61d4.chunk.js.map